<?xml version="1.0" encoding="UTF-8"?>

<COMPONENT>
	<HEADER AUTHOR="cimt AG" COMPATIBILITY="ALL"
		DATA_AUTO_PROPAGATE="false" PLATEFORM="ALL" RELEASE_DATE="20150507A"
		SERIAL="" STARTABLE="true" STATUS="PROD" VERSION="4.5">
		<SIGNATURE />
	</HEADER>
	<FAMILIES>
		<FAMILY>Management</FAMILY>
	</FAMILIES>
	<DOCUMENTATION>
		<URL />
	</DOCUMENTATION>
	<CONNECTORS>
	    <CONNECTOR CTYPE="FLOW" MAX_INPUT="0" MAX_OUTPUT="0"/>
	    <CONNECTOR CTYPE="ITERATE" MAX_OUTPUT="1" MAX_INPUT="1"/>
		<CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" />
		<CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" />
	    <CONNECTOR CTYPE="COMPONENT_OK" MAX_INPUT="1" />
	    <CONNECTOR CTYPE="COMPONENT_ERROR"/>
	    <CONNECTOR CTYPE="RUN_IF"/>
	</CONNECTORS>
	<PARAMETERS>
    	<PARAMETER
	      NAME="CONNECTION"
	      FIELD="COMPONENT_LIST"
	      FILTER="REGEXP:^(.)*(Connection)(.)*"
	      NUM_ROW="8" 
	      REQUIRED="true"
    	/>
		<PARAMETER NAME="CLOSE_CONNECTION" FIELD="CHECK" NUM_ROW="8">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="JOB_NAME" NUM_ROW="10" REQUIRED="true" >
			<DEFAULT>jobName</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="JOB_DISPLAY_NAME" NUM_ROW="12" >
			<DEFAULT></DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="PROCESS_INSTANCE_NAME" NUM_ROW="15" />
		<PARAMETER FIELD="TEXT" NAME="JOB_WORK_ITEM" NUM_ROW="20" />
	    <PARAMETER FIELD="CHECK" NAME="EMPTY_WORK_ITEM_IS_NULL" NUM_ROW="20">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="TIME_RANGE_START" NUM_ROW="22" />
		<PARAMETER FIELD="TEXT" NAME="TIME_RANGE_END" NUM_ROW="22" />
		<PARAMETER FIELD="TEXT" NAME="VALUE_RANGE_START" NUM_ROW="23" />
		<PARAMETER FIELD="TEXT" NAME="VALUE_RANGE_END" NUM_ROW="23" />
		<PARAMETER FIELD="TEXT" NAME="CONTEXT_VAR_JOB_INSTANCE_ID" NUM_ROW="30" GROUP="CONTEXT_VARS">
			<DEFAULT></DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="CONTEXT_VAR_PROCESS_INSTANCE_ID" NUM_ROW="32" GROUP="CONTEXT_VARS">
			<DEFAULT></DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="CONTEXT_VAR_EXT_JOB_INSTANCE_ID" NUM_ROW="34" GROUP="CONTEXT_VARS">
			<DEFAULT></DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="SAVE_CONTEXT_AT_START" NUM_ROW="36" GROUP="CONTEXT_VARS">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>		
		<PARAMETER FIELD="CHECK" NAME="DO_NOT_SAVE_PASSWORDS" NUM_ROW="37" GROUP="CONTEXT_VARS" SHOW_IF="SAVE_CONTEXT_AT_START == 'true'">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="RESTART_FROM_JOB_INSTANCE_ID" NUM_ROW="38" GROUP="CONTEXT_VARS" SHOW_IF="SAVE_CONTEXT_AT_START == 'true'">
			<DEFAULT></DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="RETRIEVE_LAST_RUN_DATA" GROUP="PREV_JOB_INFO" NUM_ROW="40" >
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="RETRIEVE_LAST_RUN_DATA_SUCCESSFUL" GROUP="PREV_JOB_INFO" NUM_ROW="40" SHOW_IF="RETRIEVE_LAST_RUN_DATA == 'true'">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="RETRIEVE_LAST_RUN_DATA_WITH_DATA" GROUP="PREV_JOB_INFO" NUM_ROW="40" SHOW_IF="RETRIEVE_LAST_RUN_DATA == 'true'">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="RETRIEVE_LAST_RUN_DATA_FOR_WORKITEM" GROUP="PREV_JOB_INFO" NUM_ROW="40" SHOW_IF="RETRIEVE_LAST_RUN_DATA == 'true'">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="COLLECT_SOURCE_INSTANCE_IDS" GROUP="PREV_JOB_INFO" NUM_ROW="50" SHOW_IF="RETRIEVE_LAST_RUN_DATA == 'true'">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="RETRIEVE_LAST_SOURCE_SUCCESSFUL" GROUP="PREV_JOB_INFO" NUM_ROW="50" SHOW_IF="(RETRIEVE_LAST_RUN_DATA == 'true') and (COLLECT_SOURCE_INSTANCE_IDS == 'true')">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="RETRIEVE_LAST_SOURCE_WITH_DATA" GROUP="PREV_JOB_INFO" NUM_ROW="50" SHOW_IF="(RETRIEVE_LAST_RUN_DATA == 'true') and (COLLECT_SOURCE_INSTANCE_IDS == 'true')">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="SOURCE_JOB_NAMES" FIELD="TABLE" GROUP="PREV_JOB_INFO" NUM_ROW="60" SHOW_IF="(RETRIEVE_LAST_RUN_DATA == 'true') and (COLLECT_SOURCE_INSTANCE_IDS == 'true')">
			<ITEMS>
				<ITEM NAME="NAME" FIELD="TEXT"/>
			</ITEMS>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="OK_RESULT_CODES" GROUP="PREV_JOB_INFO" NUM_ROW="65" SHOW_IF="RETRIEVE_LAST_RUN_DATA == 'true'">
			<DEFAULT>"0"</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="INITIAL_PREV_JOB_INSTANCE_ID" GROUP="PREV_JOB_INFO" NUM_ROW="70" SHOW_IF="RETRIEVE_LAST_RUN_DATA == 'true'">
			<DEFAULT>0l</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="INITIAL_PREV_JOB_START_DATE" GROUP="PREV_JOB_INFO" NUM_ROW="71" SHOW_IF="RETRIEVE_LAST_RUN_DATA == 'true'">
			<DEFAULT>TalendDate.parseDate("yyyy-MM-dd", "1970-01-01")</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="INITIAL_PREV_TIME_RANGE_END" GROUP="PREV_JOB_INFO" NUM_ROW="72" SHOW_IF="RETRIEVE_LAST_RUN_DATA == 'true'">
			<DEFAULT>TalendDate.parseDate("yyyy-MM-dd", "1970-01-01")</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="INITIAL_PREV_VALUE_RANGE_END" GROUP="PREV_JOB_INFO" NUM_ROW="73" SHOW_IF="RETRIEVE_LAST_RUN_DATA == 'true'">
			<DEFAULT>"0"</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="INITIAL_PREV_RESULT_ITEM" GROUP="PREV_JOB_INFO" NUM_ROW="74" SHOW_IF="RETRIEVE_LAST_RUN_DATA == 'true'">
			<DEFAULT>"0"</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="SET_UTC_TIMEZONE" NUM_ROW="90" >
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="MEASURE_MEMORY_USAGE" NUM_ROW="90" >
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
	    <PARAMETER NAME="USE_LOG4J" FIELD="CHECK" NUM_ROW="100" GROUP="LOG4J">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
	    <PARAMETER NAME="LOG4J_CONFIG_FILE" FIELD="FILE" NUM_ROW="120" SHOW_IF="USE_LOG4J == 'true'" GROUP="LOG4J">
			<DEFAULT>"/path/to/log4j.xml"</DEFAULT>
		</PARAMETER>
	    <PARAMETER NAME="USE_LOG_FILE" FIELD="CHECK" NUM_ROW="130" SHOW_IF="USE_LOG4J == 'true'" GROUP="LOG4J">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
	    <PARAMETER NAME="LOG_FILE_PATH" FIELD="FILE" NUM_ROW="140" REQUIRED="true" SHOW_IF="(USE_LOG4J == 'true') and (USE_LOG_FILE == 'true')" GROUP="LOG4J">
			<DEFAULT>"/var/log/talend_jobs/{project}/{jobName}_{jobInstanceId}.log"</DEFAULT>
		</PARAMETER>
	    <PARAMETER NAME="LOG_FILE_LAYOUT" FIELD="TEXT" NUM_ROW="150" REQUIRED="true" SHOW_IF="(USE_LOG4J == 'true') and (USE_LOG_FILE == 'true')" GROUP="LOG4J">
			<DEFAULT>"%-6r [%15.15t] %-5p %30.30c %x - [%X{origin}] %m%n"</DEFAULT>
		</PARAMETER>
	    <PARAMETER NAME="ADD_CONTEXT_TO_MDC" FIELD="CHECK" NUM_ROW="170" SHOW_IF="USE_LOG4J == 'true'" GROUP="LOG4J">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="HELPER_NAME" NUM_ROW="180"  SHOW_IF="USE_LOG4J == 'true'" GROUP="LOG4J">
			<DEFAULT></DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="USE_DB_APPENDER" NUM_ROW="200" SHOW_IF="USE_LOG4J == 'true'" GROUP="LOG4J">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="PATTEN_LAYOUT" NUM_ROW="210" SHOW_IF="(USE_LOG4J == 'true') and (USE_DB_APPENDER == 'true')" REQUIRED="true" GROUP="LOG4J">
			<DEFAULT>"[%X{origin}] %m"</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="LOG_BATCH_UPDATE_MILLIS" NUM_ROW="220" SHOW_IF="(USE_LOG4J == 'true') and (USE_DB_APPENDER == 'true')" GROUP="LOG4J">
			<DEFAULT>5000</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="LOG_BATCH_SIZE" NUM_ROW="220" SHOW_IF="(USE_LOG4J == 'true') and (USE_DB_APPENDER == 'true')" GROUP="LOG4J">
			<DEFAULT>100</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="CATCH_SYSOUT_HINT" FIELD="LABEL" COLOR="0;0;0" NUM_ROW="300" SHOW_IF="USE_LOG4J == 'true'" GROUP="LOG4J">
			<DEFAULT>This setting affects this job and all further jobs in the same VM!</DEFAULT>
		</PARAMETER>
	    <PARAMETER NAME="CATCH_SYSOUT" FIELD="CHECK" NUM_ROW="310" SHOW_IF="USE_LOG4J == 'true'" GROUP="LOG4J">
			<DEFAULT>true</DEFAULT>
		</PARAMETER>
	    <PARAMETER NAME="FORWARD_TO_CONSOLE" FIELD="CHECK" NUM_ROW="310" SHOW_IF="(USE_LOG4J == 'true') and (CATCH_SYSOUT == 'true')" GROUP="LOG4J">
			<DEFAULT>true</DEFAULT>
		</PARAMETER>
	</PARAMETERS>
	<ADVANCED_PARAMETERS>
	    <PARAMETER NAME="DEBUG" FIELD="CHECK" NUM_ROW="5">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="USE_PROJECT_SPECIFIC_NAMES" NUM_ROW="10">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="PROJECT_SPECIFIC_NAME_MAP_RESOURCE" NUM_ROW="10" SHOW_IF="USE_PROJECT_SPECIFIC_NAMES == 'true'" >
			<DEFAULT>"my_project"</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="SCHEMA_NAME" NUM_ROW="20" />
		<PARAMETER FIELD="TEXT" NAME="TABLE_NAME" NUM_ROW="20" SHOW_IF="USE_PROJECT_SPECIFIC_NAMES == 'false'" >
			<DEFAULT>"JOB_INSTANCE_STATUS"</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="TABLE_NAME_CONTEXT" NUM_ROW="30" SHOW_IF="USE_PROJECT_SPECIFIC_NAMES == 'false'" >
			<DEFAULT></DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="TABLE_NAME_COUNTER" NUM_ROW="35" SHOW_IF="USE_PROJECT_SPECIFIC_NAMES == 'false'" >
			<DEFAULT></DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="MAX_MESSAGE_LENGTH" NUM_ROW="40" REQUIRED="true" SHOW_IF="USE_PROJECT_SPECIFIC_NAMES == 'false'" >
			<DEFAULT>1000</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="CHECK" NAME="IS_AUTO_INCREMENT" NUM_ROW="50" SHOW_IF="USE_PROJECT_SPECIFIC_NAMES == 'false'" >
			<DEFAULT>true</DEFAULT>
		</PARAMETER>
		<PARAMETER FIELD="TEXT" NAME="SEQUENCE_EXPRESSION" NUM_ROW="60" REQUIRED="true" SHOW_IF="(USE_PROJECT_SPECIFIC_NAMES == 'false') and (IS_AUTO_INCREMENT == 'false')" />
		<PARAMETER FIELD="CHECK" NAME="REDUCE_RESUME_LOGS" NUM_ROW="70" SHOW_IF="USE_LOG4J == 'true'" >
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
	</ADVANCED_PARAMETERS>
	<CODEGENERATION>
		<IMPORTS>
			<IMPORT NAME="cimt.talendcomp.jobinstances" MODULE="cimt.talendcomp.jobinstances-4.5.jar" REQUIRED="true" />
			<IMPORT NAME="log4j" MODULE="log4j-1.2.17.jar" REQUIRED="true" />
			<!-- the name part "user" must match to the value in parameter PROJECT_SPECIFIC_NAME_MAP_RESOURCE
			<IMPORT NAME="custom_mapping_test" MODULE="mapping_user.properties.jar" REQUIRED="true" />
			 -->
		</IMPORTS>
	</CODEGENERATION>
	<RETURNS>
		<RETURN AVAILABILITY="AFTER" NAME="JOB_INSTANCE_ID" TYPE="id_Long" />
		<RETURN AVAILABILITY="AFTER" NAME="WORK_ITEM" TYPE="id_String" />
		<RETURN AVAILABILITY="AFTER" NAME="SOURCE_JOB_INSTANCE_ID_LIST" TYPE="id_String" />
		<RETURN AVAILABILITY="AFTER" NAME="JOB_START_DATE" TYPE="id_Date" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_JOB_EXISTS" TYPE="id_Boolean" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_JOB_START_DATE" TYPE="id_Date" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_JOB_STOP_DATE" TYPE="id_Date" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_JOB_INSTANCE_ID" TYPE="id_Long" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_JOB_TALEND_PID" TYPE="id_String" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_JOB_HOST_PID" TYPE="id_Integer" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_JOB_HOST_NAME" TYPE="id_String" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_TIME_RANGE_START" TYPE="id_Date" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_TIME_RANGE_END" TYPE="id_Date" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_VALUE_RANGE_START" TYPE="id_String" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_VALUE_RANGE_END" TYPE="id_String" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_JOB_RETURN_CODE" TYPE="id_Integer" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_WORK_ITEM" TYPE="id_String" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_RESULT_ITEM" TYPE="id_String" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_COUNT_INPUT" TYPE="id_Integer" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_COUNT_OUTPUT" TYPE="id_Integer" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_COUNT_UPDATED" TYPE="id_Integer" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_COUNT_REJECTED" TYPE="id_Integer" />
		<RETURN AVAILABILITY="AFTER" NAME="PREV_COUNT_DELETED" TYPE="id_Integer" />	
	</RETURNS>
</COMPONENT>
